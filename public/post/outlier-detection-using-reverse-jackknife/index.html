<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Outlier Detection Using Reverse Jackknife - GBIF Data Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="John Waller" />
  <meta name="description" content="Environmental outliers are a common problem for ecological modelers using GBIF occurrence data.
One common way to remove these outliers is by using reverse jackknifing on environmental surfaces. This type of outlier detection takes the environmental values from point occurrences and checks whether the occurrence is an uncommon value in climate space ( reference pg 51 ).
The jackknife method works by first calculating the sample mean, standard deviation and range; and then steps through the sorted values comparing the distance to the mean of it and the next value." />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.42" />


<link rel="canonical" href="/post/outlier-detection-using-reverse-jackknife/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">







<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">




<link rel="stylesheet" href="/css//custom.css">


<meta property="og:title" content="Outlier Detection Using Reverse Jackknife" />
<meta property="og:description" content="Environmental outliers are a common problem for ecological modelers using GBIF occurrence data.
One common way to remove these outliers is by using reverse jackknifing on environmental surfaces. This type of outlier detection takes the environmental values from point occurrences and checks whether the occurrence is an uncommon value in climate space ( reference pg 51 ).
The jackknife method works by first calculating the sample mean, standard deviation and range; and then steps through the sorted values comparing the distance to the mean of it and the next value." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/outlier-detection-using-reverse-jackknife/" />



<meta property="article:published_time" content="2020-10-07T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2020-10-07T14:47:17&#43;02:00"/>











<meta itemprop="name" content="Outlier Detection Using Reverse Jackknife">
<meta itemprop="description" content="Environmental outliers are a common problem for ecological modelers using GBIF occurrence data.
One common way to remove these outliers is by using reverse jackknifing on environmental surfaces. This type of outlier detection takes the environmental values from point occurrences and checks whether the occurrence is an uncommon value in climate space ( reference pg 51 ).
The jackknife method works by first calculating the sample mean, standard deviation and range; and then steps through the sorted values comparing the distance to the mean of it and the next value.">


<meta itemprop="datePublished" content="2020-10-07T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-10-07T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="796">



<meta itemprop="keywords" content="outliers,reverse jackknife," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Outlier Detection Using Reverse Jackknife"/>
<meta name="twitter:description" content="Environmental outliers are a common problem for ecological modelers using GBIF occurrence data.
One common way to remove these outliers is by using reverse jackknifing on environmental surfaces. This type of outlier detection takes the environmental values from point occurrences and checks whether the occurrence is an uncommon value in climate space ( reference pg 51 ).
The jackknife method works by first calculating the sample mean, standard deviation and range; and then steps through the sorted values comparing the distance to the mean of it and the next value."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">GBIF Data Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/categories/gbif/">
        <li class="mobile-menu-item">posts</li>
      </a><a href="https://discourse.gbif.org/c/data-blog">
        <li class="mobile-menu-item">community-forum</li>
      </a><a href="https://www.gbif.org/">
        <li class="mobile-menu-item">gbif.org</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">about</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">
	<img src= "/logo.png" alt="GBIF-analytics-blog" style ="width:20%;">
  </a>
  
	
  
  
</div>

<nav class="site-navbar">

  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/categories/gbif/">posts</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="https://discourse.gbif.org/c/data-blog">community-forum</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="https://www.gbif.org/">gbif.org</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">about</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
	
    <header class="post-header">
      <h1 class="post-title">Outlier Detection Using Reverse Jackknife</h1>
	  
	  
      <div class="post-author">John Waller</div>

      <div class="post-meta">
        <span class="post-time"> 2020-10-07 </span>
        
        
        
      </div>
    </header>

    
    

    
    

    
    <div class="post-content">
      <p><strong>Environmental outliers</strong> are a common problem for ecological modelers using <strong>GBIF</strong> occurrence data.</p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//surface_plot.jpg" /></p>
<p>One common way to remove these outliers is by using <strong>reverse jackknifing</strong> on <a href="https://www.worldclim.org/data/bioclim.html">environmental surfaces</a>. This type of outlier detection takes the environmental values from point occurrences and checks whether the occurrence is an uncommon value in climate space ( <a href="https://www.gbif.org/document/80528/principles-and-methods-of-data-cleaning-primary-species-and-species-occurrence-data">reference pg 51</a> ).</p>
<!--more-->
<blockquote>
<p>The <strong>jackknife method</strong> works by first calculating the sample mean, standard deviation and range; and then steps through the sorted values comparing the distance to the mean of it and the next value. Where the distance to mean between values is above a threshold level then that sample value and those further away from the mean are flagged as outliers. An outlierness metric is also calculated for the sample value. - <a href="https://code.google.com/archive/p/ala-dataquality/wikis/DETECTED_OUTLIER_JACKKNIFE.wiki">source link</a></p>
</blockquote>
<p><strong>Environmental outliers</strong> can arise for a few reasons:</p>
<ol style="list-style-type: decimal">
<li>A point that is a mistake (mirrored lat-lon, some other data-entry mistake)</li>
<li>A point that is a centroid (of a cournty or region) <a href="https://data-blog.gbif.org/post/country-centroids/">previous blog post</a></li>
<li>A point located at a zoo, herbarium, or other institution</li>
<li>A point sampled from a <a href="https://data-blog.gbif.org/post/finding-gridded-datasets/">gridded dataset</a></li>
<li>A point occurs in a micro-climate that is below the resolution of the climate surface</li>
<li>Or naturally because of chance</li>
</ol>
<p><strong>1-4</strong> are usually seen as undesirable for most users.</p>
<p>Here is a typical result from a reverse-jackknifing run. The <strong>outlier</strong> occurs at the <a href="https://www.ohsu.edu/onprc">Oregon Regional Primate Research Center</a>. Previously, I discussed a <a href="https://data-blog.gbif.org/post/outlier-detection-using-dbscan/">techinque</a> for discovering outliers that uses <strong>distance</strong> from other points. In this example, a distance based-method would also spot this environmental outlier.</p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//8978926.jpg" /></p>
<p><strong>Cumulative frequency plots</strong> are to the right. Bioclimatic surface values are on the x-axis and frequency on the y-axis. <strong>Black-colored points</strong> very much to the right or left are outliers. I also write the number (<strong>7</strong>) of other surfaces that flagged this point as an outlier as a little number next to the point. Because of multiple-comparisons, a point should probably not be considered a “true outlier” unless it an outlier in &gt; 5 surfaces (depending on the number of surfaces used).</p>
<p><strong>Environmental surfaces</strong>, however, give us the power to spot outliers that occur within the main-blob of other occurrence points.</p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//8493215.jpg" /></p>
<p>In this example the <strong>outliers</strong> happen to all come from <strong>iNaturalist</strong> ( <a href="https://www.gbif.org/occurrence/1920812594">1</a>, <a href="https://www.gbif.org/occurrence/2576278969">2</a> ). At least one of the <a href="https://www.inaturalist.org/observations/17283719">outliers</a> appears to be close to a <a href="http://www.yacumama.com.pe/es/">private wildlife park</a>. Within-range outlier flagging <strong>would not</strong> be possible with only IUCN or <a href="https://www.inaturalist.org/taxa/43389-Saguinus-fuscicollis">iNaturalist range maps</a>.</p>
<div id="reverse-jackknifing-all-of-gbif" class="section level2">
<h2>Reverse jackknifing all of GBIF</h2>
<p>I was able to run reverse jackknifing on all GBIF Animal, Plant, and Fungi records. I ported the <code>biogeo::rjack</code> <a href="https://github.com/cran/biogeo/blob/master/R/rjack.R">implementation</a> into scala-spark in order to run on the cluster ( <a href="https://github.com/jhnwllr/gbif_reverse_jackknife">GitHub</a> ). This takes around 25 minutes on the current GBIF cluster set up. I used the 19 <a href="https://www.inaturalist.org/observations/17283719">bioclim variables</a> at a 0.1 degree resolution. These variables are only available <strong>on land</strong>, so nothing aquatic was run.There are environmental layers for the <a href="http://www.marspec.org/">oceans</a> that can also be used for outlier detection. I ran on all land species with more than 20 unique bioclim values.</p>
</div>
<div id="gbif-outlier-statistics" class="section level2">
<h2>GBIF Outlier Statistics</h2>
<p>Around 2M occurrences get flagged with at least 1 surface (of 19) as an outlier. But most of these are probably false positives because of multiple comparisons. Around 150K occurrences are flagged with &gt;=5 surfaces.</p>
<p><strong>Preserved specimens</strong> have more than two times the number of outliers as <strong>human observations</strong>, even though there are six times fewer preserved specimen records.</p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//basisofrecord_barplot.svg" /></p>
<p><strong>Preserved specimens</strong> are often geocoded from locality and have a high uncertainty. Most datasets had less than 1% of their occurrences flagged.</p>
</div>
<div id="additional-outlier-examples" class="section level2">
<h2>Additional outlier examples</h2>
<p>Here I plot some additional outlier examples from my full GBIF run (all turned out to be centroid related).</p>
<div style="outline: 5px solid #F9F9F9;">
<p><strong>Example 1</strong></p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//5219573.jpg" /></p>
<p>The <a href="https://www.gbif.org/occurrence/476819916">outlier</a> is a <strong>preserved specimen</strong> and location is known only from a locality description. Additionally, the point has a <a href="https://github.com/gbif/portal-feedback/issues/2428">known</a> default (and wrong) coordinate uncertainty (<strong>301m</strong>) from GeoLocate.</p>
</div>
<div style="outline: 5px solid #F9F9F9;">
<p><strong>Example 2</strong></p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//2685400.jpg" /></p>
<p>The <a href="https://www.gbif.org/occurrence/1828885044">outlier</a> is a <strong>preserved specimen</strong> and occurs at the centroid of the city of <strong>Tateyama</strong>.</p>
</div>
<div style="outline: 5px solid #F9F9F9;">
<p><strong>Example 3</strong></p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//5284989.jpg" /></p>
<p>The <a href="https://www.gbif.org/occurrence/1701728186">outlier</a> is a <strong>preserved specimen</strong> and occurs at the centroid of the <strong>United States</strong>.</p>
</div>
<div style="outline: 5px solid #F9F9F9;">
<p><strong>Example 4</strong></p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//5285635.jpg" /></p>
<p>The <a href="https://www.gbif.org/occurrence/1228589777">outlier</a> is a <strong>preserved specimen</strong> and occurs at the centroid of the <strong>Quebec</strong>.</p>
</div>
<div style="outline: 5px solid #F9F9F9;">
<p><strong>Example 5</strong></p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//2436544.jpg" /></p>
<p>The <a href="https://www.gbif.org/occurrence/865719213">outlier</a> is a <strong>preserved specimen</strong> and occurs close to the centroid of the <strong>Senegal</strong>. The other gray points near the black outlier point are outliers only on this surface. While the outlier in Senegal is an outlier on 7 other surfaces.</p>
</div>
<div style="outline: 5px solid #F9F9F9;">
<p><strong>Example 6</strong></p>
<p><img src="/post/2020-07-10-outlier-detection-using-reverse-jackknife_files//5219566.jpg" /></p>
<p>The <a href="https://www.gbif.org/occurrence/865719199">outlier</a> is a <strong>preserved specimen</strong> and is likely a centroid of <strong>Africa</strong>. It also is an outlier in <strong>5</strong> other bioclim surfaces.</p>
</div>
</div>
<div id="cleaning-gbif-downloads-using-reverse-jackknifing" class="section level2">
<h2>Cleaning GBIF downloads using reverse jackknifing</h2>
<p>Currently, there is no outlier detection implemented on GBIF.org. You can view the results of my full GBIF run <a href="">here</a>.</p>
<p>It is possible to do this in R.</p>
<pre class="r"><code>
library(biogeo)

# getData(&#39;worldclim&#39;, var=&#39;bio&#39;, res=10,path=path)


rjack()

</code></pre>
</div>

    </div>

    
    

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/outliers/">outliers</a>
          
          <a href="/tags/reverse-jackknife/">reverse jackknife</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/issues-and-flags/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">GBIF Issues &amp; Flags</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/outlier-detection-using-dbscan/">
            <span class="next-text nav-default">Outlier Detection Using DBSCAN</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

      </div>
    </main>

    <footer id="footer" class="footer">
      


 
<div>
<h3>This post represents the ideas of the author.</h3>
</div>
<div id='discourse-comments'></div>
<script type="text/javascript">
  DiscourseEmbed = { discourseUrl: 'https://discourse.gbif.org/',
                     discourseEmbedUrl: 'https://data-blog.gbif.org\/post\/outlier-detection-using-reverse-jackknife\/' };

  (function() {
    var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
    d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
  })();
</script>  


<div class = "copyright">
	<a class="theme-link" href="https://www.gbif.org/what-is-gbif">What is GBIF?</a>
	<span class="division">|</span>
	<a class="theme-link" href="https://www.gbif.org/developer/summary">API</a> 
	<span class="division">|</span>
	<a class="theme-link" href="https://www.gbif.org/faq">FAQ</a>
	<span class="division">|</span>
	<a class="theme-link" href="https://discourse.gbif.org/">Community-Forum</a>
</div>

<div class = "copyright"> 
	<span class="theme-info">GBIF Secretariat</span> 
	<span class="theme-info">Universitetsparken 15</span> 
	<span class="theme-info">DK-2100 Copenhagen Ø</span> 
	<span class="theme-info" >Denmark</span>
</div>

<div class="copyright">
	<span class="power-by">
	Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
	</span>
	<span class="division">|</span>
	<span class="theme-info">
	Theme - 
	<a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
	</span>

</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>








</body>
</html>
