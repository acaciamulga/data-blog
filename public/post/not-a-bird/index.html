<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Not a bird download - GBIF Data Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="John Waller" />
  <meta name="description" content="Recently we were asked on GitHub whether there was a way to get all animal occurrences that are not a bird. This seems like an easy enough request, but unfortunately, there is currently no way to exclude groups from a download search and get everything but a certain group.
A user can get all birds, but they can’t get no birds!
I thought this was an interesting question and probably useful for other people wanting smaller downloads, since there are currenly around half a billion occurrence records for birds." />

  <meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.42" />


<link rel="canonical" href="/post/not-a-bird/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">







<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">




<link rel="stylesheet" href="/css//custom.css">


<meta property="og:title" content="Not a bird download" />
<meta property="og:description" content="Recently we were asked on GitHub whether there was a way to get all animal occurrences that are not a bird. This seems like an easy enough request, but unfortunately, there is currently no way to exclude groups from a download search and get everything but a certain group.
A user can get all birds, but they can’t get no birds!
I thought this was an interesting question and probably useful for other people wanting smaller downloads, since there are currenly around half a billion occurrence records for birds." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/not-a-bird/" />



<meta property="article:published_time" content="2019-06-19T00:00:00&#43;00:00"/>

<meta property="article:modified_time" content="2019-06-19T15:58:23&#43;02:00"/>











<meta itemprop="name" content="Not a bird download">
<meta itemprop="description" content="Recently we were asked on GitHub whether there was a way to get all animal occurrences that are not a bird. This seems like an easy enough request, but unfortunately, there is currently no way to exclude groups from a download search and get everything but a certain group.
A user can get all birds, but they can’t get no birds!
I thought this was an interesting question and probably useful for other people wanting smaller downloads, since there are currenly around half a billion occurrence records for birds.">


<meta itemprop="datePublished" content="2019-06-19T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-06-19T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="260">



<meta itemprop="keywords" content="API,downloads," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Not a bird download"/>
<meta name="twitter:description" content="Recently we were asked on GitHub whether there was a way to get all animal occurrences that are not a bird. This seems like an easy enough request, but unfortunately, there is currently no way to exclude groups from a download search and get everything but a certain group.
A user can get all birds, but they can’t get no birds!
I thought this was an interesting question and probably useful for other people wanting smaller downloads, since there are currenly around half a billion occurrence records for birds."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">GBIF Data Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/categories/gbif/">
        <li class="mobile-menu-item">posts</li>
      </a><a href="https://discourse.gbif.org/c/data-blog">
        <li class="mobile-menu-item">community-forum</li>
      </a><a href="https://www.gbif.org/">
        <li class="mobile-menu-item">gbif.org</li>
      </a><a href="/about/">
        <li class="mobile-menu-item">about</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">
	<img src= "/logo.png" alt="GBIF-analytics-blog" style ="width:20%;">
  </a>
  
	
  
  
</div>

<nav class="site-navbar">

  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/categories/gbif/">posts</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="https://discourse.gbif.org/c/data-blog">community-forum</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="https://www.gbif.org/">gbif.org</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about/">about</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
	
    <header class="post-header">
      <h1 class="post-title">Not a bird download</h1>
	  
	  
      <div class="post-author">John Waller</div>

      <div class="post-meta">
        <span class="post-time"> 2019-06-19 </span>
        <div class="post-category">
            
              <a href="/categories/gbif/"> GBIF </a>
            
          </div>
        
        
      </div>
    </header>

    
    

    
    

    
    <div class="post-content">
      <p>Recently we were asked on <a href="https://github.com/gbif/portal-feedback/issues/2053">GitHub</a> whether there was a way to get all animal occurrences that are not a bird. This seems like an easy enough request, but unfortunately, there is currently no way to <strong>exclude groups</strong> from a download search and get everything but a certain group.</p>
<blockquote>
<p>A user can get all birds, but they can’t get <strong>no birds</strong>!</p>
</blockquote>
<p>I thought this was an interesting question and probably useful for other people wanting smaller downloads, since there are currenly around half a billion occurrence records for birds. I decided to get all the class keys that were not Aves (212) and make a no birds animal search query.</p>
<p><img src="/post/2019-06-19-not-a-bird_files/corvid.jpeg" /></p>
<p><a href="https://www.gbif.org/occurrence/search?taxon_key=119&amp;taxon_key=120&amp;taxon_key=121&amp;taxon_key=131&amp;taxon_key=133&amp;taxon_key=134&amp;taxon_key=135&amp;taxon_key=136&amp;taxon_key=137&amp;taxon_key=139&amp;taxon_key=140&amp;taxon_key=143&amp;taxon_key=144&amp;taxon_key=146&amp;taxon_key=158&amp;taxon_key=159&amp;taxon_key=175&amp;taxon_key=176&amp;taxon_key=199&amp;taxon_key=203&amp;taxon_key=204&amp;taxon_key=205&amp;taxon_key=206&amp;taxon_key=207&amp;taxon_key=209&amp;taxon_key=210&amp;taxon_key=211&amp;taxon_key=213&amp;taxon_key=214&amp;taxon_key=215&amp;taxon_key=216&amp;taxon_key=221&amp;taxon_key=222&amp;taxon_key=224&amp;taxon_key=225&amp;taxon_key=226&amp;taxon_key=229&amp;taxon_key=235&amp;taxon_key=236&amp;taxon_key=238&amp;taxon_key=239&amp;taxon_key=247&amp;taxon_key=248&amp;taxon_key=249&amp;taxon_key=250&amp;taxon_key=251&amp;taxon_key=252&amp;taxon_key=253&amp;taxon_key=254&amp;taxon_key=255&amp;taxon_key=256&amp;taxon_key=276&amp;taxon_key=277&amp;taxon_key=278&amp;taxon_key=281&amp;taxon_key=290&amp;taxon_key=307&amp;taxon_key=308&amp;taxon_key=309&amp;taxon_key=345&amp;taxon_key=346&amp;taxon_key=347&amp;taxon_key=350&amp;taxon_key=351&amp;taxon_key=352&amp;taxon_key=353&amp;taxon_key=354&amp;taxon_key=355&amp;taxon_key=356&amp;taxon_key=358&amp;taxon_key=359&amp;taxon_key=360&amp;taxon_key=361&amp;taxon_key=365&amp;taxon_key=367&amp;taxon_key=5964034&amp;taxon_key=5967490&amp;taxon_key=7188530&amp;taxon_key=7188589&amp;taxon_key=7194193&amp;taxon_key=7375758&amp;taxon_key=7496922&amp;taxon_key=7664204&amp;taxon_key=7742773&amp;taxon_key=7774442&amp;taxon_key=7799559&amp;taxon_key=7920181&amp;taxon_key=8066236&amp;taxon_key=8246594&amp;taxon_key=8355438&amp;taxon_key=8365233&amp;taxon_key=9238047&amp;taxon_key=9251154&amp;taxon_key=9273948&amp;taxon_key=9304242&amp;taxon_key=9312928&amp;taxon_key=9421786&amp;taxon_key=9424764&amp;taxon_key=9455590&amp;taxon_key=9632402">search query for all animals that are not a bird</a></p>
<p>This query above is all the taxon keys for <a href="https://www.gbif.org/species/search?rank=CLASS&amp;highertaxon_key=1&amp;status=ACCEPTED&amp;status=DOUBTFUL">classes that are not birds</a>. You could also add <code>taxon_key=6</code> to the end of this and get all plants and animals that are not a bird.</p>
<p>This brute-force approach of getting everything that is not of interest only works if your end query has <strong>less than 200 taxon keys</strong>. Fortunately for the case of animals, <strong>there are only 100 non-bird classes</strong>.</p>
<p>I generated this query using this R code.</p>
<pre class="r"><code>
library(purrr)
library(roperators) # for %+% string operator
library(stringr)

# api call to get all class keys for animals
base_url &lt;- &quot;https://www.gbif.org/api/species/search?&quot;
params &lt;- &quot;rank=CLASS&amp;highertaxon_key=1&amp;status=ACCEPTED&amp;status=DOUBTFUL&amp;advanced=1&amp;limit=200&quot; 

url &lt;- base_url %+% params

query &lt;- httr::GET(url) %&gt;% 
httr::content() %&gt;% 
pluck(&quot;results&quot;) %&gt;%
map(~ .x$classKey) %&gt;%
map_chr(~ &quot;taxon_key=&quot; %+% .x) %&gt;%
paste(collapse=&quot;&amp;&quot;) %&gt;%
str_replace_all(&quot;taxon_key=212&amp;&quot;,&quot;&quot;) # remove birds 

# paste this result into a browser
&quot;https://www.gbif.org/occurrence/search?&quot; %+% query 
</code></pre>
<pre><code>https://www.gbif.org/occurrence/search?taxon_key=119&amp;taxon_key=120&amp;taxon_key=121&amp;taxon_key=131&amp;taxon_key=133&amp;taxon_key=134&amp;taxon_key=135&amp;taxon_key=136&amp;taxon_key=137&amp;taxon_key=139&amp;taxon_key=140&amp;taxon_key=143&amp;taxon_key=144&amp;taxon_key=146&amp;taxon_key=158&amp;taxon_key=159&amp;taxon_key=175&amp;taxon_key=176&amp;taxon_key=199&amp;taxon_key=203&amp;taxon_key=204&amp;taxon_key=205&amp;taxon_key=206&amp;taxon_key=207&amp;taxon_key=209&amp;taxon_key=210&amp;taxon_key=211&amp;taxon_key=213&amp;taxon_key=214&amp;taxon_key=215&amp;taxon_key=216&amp;taxon_key=221&amp;taxon_key=222&amp;taxon_key=224&amp;taxon_key=225&amp;taxon_key=226&amp;taxon_key=229&amp;taxon_key=235&amp;taxon_key=236&amp;taxon_key=238&amp;taxon_key=239&amp;taxon_key=247&amp;taxon_key=248&amp;taxon_key=249&amp;taxon_key=250&amp;taxon_key=251&amp;taxon_key=252&amp;taxon_key=253&amp;taxon_key=254&amp;taxon_key=255&amp;taxon_key=256&amp;taxon_key=276&amp;taxon_key=277&amp;taxon_key=278&amp;taxon_key=281&amp;taxon_key=290&amp;taxon_key=307&amp;taxon_key=308&amp;taxon_key=309&amp;taxon_key=345&amp;taxon_key=346&amp;taxon_key=347&amp;taxon_key=350&amp;taxon_key=351&amp;taxon_key=352&amp;taxon_key=353&amp;taxon_key=354&amp;taxon_key=355&amp;taxon_key=356&amp;taxon_key=358&amp;taxon_key=359&amp;taxon_key=360&amp;taxon_key=361&amp;taxon_key=365&amp;taxon_key=367&amp;taxon_key=5964034&amp;taxon_key=5967490&amp;taxon_key=7188530&amp;taxon_key=7188589&amp;taxon_key=7194193&amp;taxon_key=7375758&amp;taxon_key=7496922&amp;taxon_key=7664204&amp;taxon_key=7742773&amp;taxon_key=7774442&amp;taxon_key=7799559&amp;taxon_key=7920181&amp;taxon_key=8066236&amp;taxon_key=8246594&amp;taxon_key=8355438&amp;taxon_key=8365233&amp;taxon_key=9238047&amp;taxon_key=9251154&amp;taxon_key=9273948&amp;taxon_key=9304242&amp;taxon_key=9312928&amp;taxon_key=9421786&amp;taxon_key=9424764&amp;taxon_key=9455590&amp;taxon_key=9632402
</code></pre>
<!--more-->

    </div>

    
    

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/api/">API</a>
          
          <a href="/tags/downloads/">downloads</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/exploring-es50-for-gbif/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Exploring es50 for GBIF</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/big-national-checklists/">
            <span class="next-text nav-default">Big National Checklists</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

      </div>
    </main>

    <footer id="footer" class="footer">
      


 
<div>
<h3>This post represents the ideas of the author.</h3>
</div>
<div id='discourse-comments'></div>
<script type="text/javascript">
  DiscourseEmbed = { discourseUrl: 'https://discourse.gbif.org/',
                     discourseEmbedUrl: 'https://data-blog.gbif.org\/post\/not-a-bird\/' };

  (function() {
    var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
    d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
  })();
</script>  


<div class = "copyright">
	<a class="theme-link" href="https://www.gbif.org/what-is-gbif">What is GBIF?</a>
	<span class="division">|</span>
	<a class="theme-link" href="https://www.gbif.org/developer/summary">API</a> 
	<span class="division">|</span>
	<a class="theme-link" href="https://www.gbif.org/faq">FAQ</a>
	<span class="division">|</span>
	<a class="theme-link" href="https://discourse.gbif.org/">Community-Forum</a>
</div>

<div class = "copyright"> 
	<span class="theme-info">GBIF Secretariat</span> 
	<span class="theme-info">Universitetsparken 15</span> 
	<span class="theme-info">DK-2100 Copenhagen Ø</span> 
	<span class="theme-info" >Denmark</span>
</div>

<div class="copyright">
	<span class="power-by">
	Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
	</span>
	<span class="division">|</span>
	<span class="theme-info">
	Theme - 
	<a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
	</span>

</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>








</body>
</html>
